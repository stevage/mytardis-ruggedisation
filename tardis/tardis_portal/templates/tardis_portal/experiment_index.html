{% extends "tardis_portal/data_browsing_template.html" %}
{% load experimentstats %}

{% block content %}

<div id="content">
  {% if user.is_authenticated %}
  <div class="post">
    <h1 class="title"><a href="#">My Experiments</a></h1>
    {% if experiments %}
    <strong>{{ experiments.count }}</strong> experiments
    {% endif %}
    <br/><br/>

    {% if experiments %}
    <table class="experiment-table">
      {% for experiment in experiments %}
      <tr>
	<th>
	  <a href="{{ experiment.get_absolute_url }}">{{ experiment.title }} </a>
	</th>
      </tr>
      <tr>
	<td>From <strong>{{experiment.institution_name}}</strong>,
	  deposited <strong>{{ experiment.update_time|date:"jS F Y" }}</strong>,
	  last modified <strong>{{ experiment.update_time|date:"jS F Y" }}</strong>
	</td>
      </tr>
      {% if experiment.start_time and experiment.end_time %}
        <tr>
          <td>
	    <strong>{{ experiment.start_time|date:"jS F Y H:i" }}</strong>
	    - <strong>{{ experiment.end_time|date:"jS F Y H:i" }}</srong>
          </td>
        </tr>
      {% endif %}
      <tr>
	<td class="experiment-table-stats"><strong>{{ experiment.dataset_set.all.count }}</strong> dataset(s), containing <strong>{{ experiment.id|experiment_file_count }}</strong> files
	  <br/>
	  <br/>
      </tr>
      {%endfor %}
    </table>
    {% else %}
      No experiments available at this time.
    {% endif %}
  </div>
  <br/>
  <br/>
  <br/>
  {% endif %}
  <div class="post">
    <h1 class="title">
      <a href="#">Public Experiments</a>
    </h1>
    {% if experiments %}
    <strong>{{ public_experiments.count }}</strong> public experiments
    {% endif %}
    <br/>
    <br/>
    {% if public_experiments %}
    <table class="experiment-table">
      {% for public_experiment in public_experiments %}
        <tr>
	  <th>
	    <a href="../view/{{ public_experiment.id }}">{{ public_experiment.title }}</a>
	  </th>
	</tr>
      <tr>
	<td>From <strong>{{public_experiment.institution_name}}</strong>,
	  deposited <strong>{{ public_experiment.update_time|date:"jS F Y" }}</strong>,
	  last modified <strong>{{ experiment.update_time|date:"jS F Y" }}</strong>
	</td>
      </tr>
      {% if experiment.start_time and experiment.end_time %}
        <tr>
          <td>
	    <strong>{{ experiment.start_time|date:"jS F Y H:i" }}</strong>
	    - <strong>{{ experiment.end_time|date:"jS F Y H:i" }}</srong>
          </td>
        </tr>
      {% endif %}
      <tr>
	<td class="experiment-table-stats"><strong>{{ public_experiment.dataset_set.all.count }}</strong> dataset(s), containing <strong>{{ public_experiment.id|experiment_file_count }}</strong> files
	  <br/>
	  <br/>
      </tr>
      {%endfor %}
    </table>
    {% else %}
      No public experiments at the moment.
    {% endif %}
  </div>
</div>

{% endblock %}
